# ドキュメント管理ワークフロー

## ドキュメント確認の義務化パターン

エージェント定義において、「確認する」「更新する」などの抽象的な指示だけでは、実際の作業が省略されがち。
具体的な行動を義務化し、確認内容の可視化を求めることで、ドキュメントの品質を保つ。

### Before（抽象的）

```markdown
2. ドキュメント整理を実行
   - 更新不要と判断した場合も、その理由を明記すること
```

**問題点**:
- 実際にファイルを読まずに「たぶん関係ない」で済ませてしまう
- 「理由を明記」だけでは、何をどう確認したのか不明確

### After（具体的・義務化）

```markdown
2. 【必須】関連ドキュメントを実際に読む（Readツールを使用）
   - 変更内容に関係するドキュメントを必ず開いて確認
   - 「たぶん関係ない」で済ませない

3. 【必須】確認した内容を列挙する
   - どのファイルを読んだか
   - そのファイルのどの部分と今回の変更を比較したか
   - なぜ更新不要と判断したか

4. 更新の可能性を積極的に探す
   - 新しいパターンや知見はないか？
   - 既存の記述に追記・修正すべき点はないか？
```

**改善点**:
- ツール名（Readツール）を明示
- 「実際に読む」を義務化
- 確認内容の列挙を必須化
- 能動的な姿勢（「探す」）を促す

### 出力フォーマットの改善

確認プロセスを可視化するため、レポートに「確認したファイル」セクションを追加。

```markdown
### ドキュメント確認・更新（必須セクション）

#### 確認したファイル
- CLAUDE.md: 専門エージェント一覧（36-50行目）と比較、task-committer の記述は最新
- .claude/skills/architecture-patterns.md: crate分離パターン（全体）と比較、今回の変更と無関係

#### 更新判断
- CLAUDE.md: 更新不要（専門エージェント一覧に変更なし）
- スキル: 更新（新パターン「ドキュメント確認の義務化」を追加）
- エージェント: 更新（software-architect.md の古い名称 commit-keeper を修正）
```

## 適用場面

- **コミット前の確認**: task-committer がドキュメント更新を検討する際
- **設計レビュー**: software-architect が既存パターンとの整合性を確認する際
- **新機能追加**: 関連するスキルやベストプラクティスの存在を確認する際

## メリット

1. **ドキュメントの鮮度維持**: 「確認しました」で済ませず、実際に読むことを強制
2. **判断根拠の明確化**: 何を見て更新不要と判断したかが分かる
3. **知見の蓄積**: 「新しいパターンはないか？」と積極的に探すことで、スキルが充実
4. **再現性**: 将来同じような判断をする際の参考になる
